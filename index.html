
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Boussole Radar â€“ Version FusionnÃ©e</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
button { background-color: #007BFF; color: white; border: none; border-radius: 5px; padding: 10px 16px; }
button:hover { background-color: #0056b3; }
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 30px; max-width: 1000px; margin: auto; }
    h1, h2, h3 { text-align: center; }
    table { width: 100%; margin-top: 20px; border-collapse: collapse; }
    td, th { padding: 8px; text-align: center; }
    select { padding: 5px; }
    .gauge { height: 20px; background: #ddd; border-radius: 10px; overflow: hidden; margin: 5px 0; }
    .bar { height: 100%; color: white; font-weight: bold; text-align: right; padding-right: 5px; }
    canvas { max-width: 600px; margin: 30px auto; display: block; border: 1px solid #333; }
    .center { text-align: center; margin: 20px; }
  </style>
</head>
<body>
<h1>ðŸ§­ Decision Compass</h1>

<div class="center">
  <p>How many scenarios do you want to evaluate ?</p>
  <select id="numOptions">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
  </select>
  <button onclick="initInputs()">Continue</button>
</div>

<div class="center" id="inputsArea" style="display:none;">
  <h3>Enter the titles of your scenarios</h3>
  <div id="inputFields"></div>
  <button onclick="generateQuestions()">Start</button>
</div>

<div class="center" id="questionsArea" style="display:none;">
  <h3>Evaluate each scenario</h3>
  <div id="questionsContainer"></div>
  <button onclick="showResults()">View results</button>
</div>

<div class="center" id="resultsArea" style="display:none;">
  <h3>Results</h3>
  <div id="resultsContainer"></div>

  <h3>Radar Chart Visualization</h3>
  <canvas id="radarChart" width="600" height="600"></canvas>

  <div class="center">
    <button onclick="location.reload()">ðŸ”„ Start over</button>
  </div>
</div>

<script>
const questions = [
  "Will I have real freedom to organize, decide, and move forward in my own way?",
  "Does this option take me out of my comfort zone and let me explore something new, exciting, or unexpected?",
  "Does this context give me space to reflect, observe, and act calmly, without pressure or overdoing?",
  "Will I be able to stay authentic, breathe in relationships, and keep some lightness in everyday life?",
  "Do I have space to think differently and propose original ideas or approaches?",
  "Can I help build or create something new that doesn't exist yet?",
  "Does what I'm doing here energize me and make me want to engage wholeheartedly?",
  "Is what Iâ€™m doing useful? Do I feel it truly serves someone or something?",
  "Do I have the opportunity to support, uplift or encourage others in my own way?",
  "Can I share what I know or live, and foster sincere exchanges with others?"
];

let num = 1;
let names = [];

function initInputs() {
  num = parseInt(document.getElementById("numOptions").value);
  const area = document.getElementById("inputsArea");
  const container = document.getElementById("inputFields");
  area.style.display = "block";
  container.innerHTML = "";
  for (let i = 0; i < num; i++) {
    container.innerHTML += `<input type="text" id="q${i}" placeholder="Scenario name ${i+1}" style="margin:5px;"><br>`;
  }
}

function generateQuestions() {
  names = [];
  for (let i = 0; i < num; i++) {
    const val = document.getElementById("q" + i).value.trim();
    names.push(val || `Option ${i+1}`);
  }
  document.getElementById("questionsArea").style.display = "block";

  const container = document.getElementById("questionsContainer");
  let html = '<table border="1"><thead><tr><th>Question</th>';
  names.forEach(n => html += `<th>${n}</th>`);
  html += '</tr></thead><tbody>';
  questions.forEach((q, i) => {
    html += `<tr><td>${q}</td>`;
    for (let j = 0; j < num; j++) {
      html += `<td><select id="r${i}_${j}">
        <option value="5">5 - Absolutely</option>
<option value="4">4 - Mostly yes</option>
<option value="3">3 - Neutral</option>
<option value="2">2 - Mostly no</option>
<option value="1">1 - Not at all</option>
<option value="-1">Not applicable</option>
      </select></td>`;
    }
    html += '</tr>';
  });
  html += '</tbody></table>';
  container.innerHTML = html;
}

function showResults() {
  const weights = [8, 9, 8, 5, 6, 7, 8, 7, 6, 6];
  const scores = Array(num).fill(0);
  const maxScores = Array(num).fill(0);

  questions.forEach((_, i) => {
    for (let j = 0; j < num; j++) {
      const val = parseInt(document.getElementById(`r${i}_${j}`).value);
      if (val >= 0) {
        scores[j] += val * weights[i];
        maxScores[j] += weights[i] * 5;
      }
    }
  });

  const resultContainer = document.getElementById("resultsContainer");
  resultContainer.innerHTML = "";
  names.forEach((name, idx) => {
    const percent = Math.round((scores[idx] / maxScores[idx]) * 100);
    const score10 = ((scores[idx] / maxScores[idx]) * 10).toFixed(1);
    resultContainer.innerHTML += `
      <p><strong>${name}</strong> - Score: ${score10} / 10</p>
      <div class="gauge"><div class="bar" style="width:${percent}%; background: linear-gradient(to right, red, orange, #a5d6a7, green);">${percent}%</div></div>
    `;
  });

  const radarDatasets = names.map((name, idx) => {
    const data = questions.map((_, i) => {
      const val = parseInt(document.getElementById(`r${i}_${idx}`).value);
      return val >= 0 ? val : 0;
    });
    return {
      label: name,
      data: data,
      fill: true,
      backgroundColor: ['rgba(255,99,132,0.2)', 'rgba(54,162,235,0.2)', 'rgba(255,206,86,0.2)', 'rgba(75,192,192,0.2)'][idx],
      borderColor: ['rgba(255,99,132,1)', 'rgba(54,162,235,1)', 'rgba(255,206,86,1)', 'rgba(75,192,192,1)'][idx],
      pointBackgroundColor: ['rgba(255,99,132,1)', 'rgba(54,162,235,1)', 'rgba(255,206,86,1)', 'rgba(75,192,192,1)'][idx]
    };
  });

  const radarCanvas = document.getElementById("radarChart");
  if (radarCanvas) {
    setTimeout(() => {
      new Chart(radarCanvas, {
        type: 'radar',
        data: {
          labels: ['Freedom', 'Discovery', 'Wisdom', 'Lightness', 'Originality', 'Creation', 'Passion', 'Usefulness', 'Encouragement', 'Sharing'],
          datasets: radarDatasets
        },
        options: {
          responsive: true,
          scales: {
            r: {
              beginAtZero: true,
              min: 0,
              max: 5,
              ticks: { stepSize: 1 }
            }
          }
        }
      });
    }, 300);
  } else {
    console.error("Canvas radarChart introuvable !");
  }

  
  // Generate the final recommendation
  const bestIndex = scores.reduce((bestIdx, currentScore, idx, arr) =>
    currentScore > arr[bestIdx] ? idx : bestIdx
  , 0);

  const recommendation = `
    <h3>âœ¨ Final Recommendation</h3>
    <p>Among the evaluated options, <strong>${names[bestIndex]}</strong> stands out as the one most aligned with your personal drivers, with a score of <strong>${((scores[bestIndex] / maxScores[bestIndex]) * 10).toFixed(1)} / 10</strong>.</p>
    <p>It appears to offer the best environment to support what truly energizes you: freedom, discovery, impact, and authenticity.</p>
    <p>This option is therefore recommendedâ€”unless another path calls to you deeply, even if it scored lower. Remember, numbers provide clarity, but your intuition is just as important.</p>
  `;

  resultContainer.innerHTML += recommendation;


  document.getElementById("resultsArea").style.display = "block";
}
</script>
</body>
</html>
